{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","deletePerson","id","delete","concat","update","object","put","Person","_ref","name","phone","react_default","a","createElement","onClick","Filter","_ref2","value","onChange","Notification","_ref3","type","text","className","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addPerson","event","preventDefault","personObject","state","find","person","toLowerCase","newName","window","confirm","newPhone","personService","changedPerson","setState","map","message","setTimeout","catch","error","filter","newPerson","deletedPerson","handleNameChange","target","handlePhoneChange","handleFilterChange","_this2","_this3","App_Notification","App_Filter","onSubmit","includes","App_Person","key","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7a1eaa3f.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl)\n\treturn request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n\tconst request = axios.post(baseUrl, newObject)\n\treturn request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n\tconst request = axios.delete(`${baseUrl}/${id}`)\n\treturn request.then(response => response.data)\n}\n\nconst update = (id, object) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, object)\n\treturn request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, update }\n","// fullstackopen 2018\n// ex. 2.6-2.19\n// Ville Heilala\n\nimport React from 'react';\nimport personService from './services/persons'\nimport './index.css'\n\nconst Person = ({ name, phone, id, deletePerson }) => (\n\t<tr>\n\t\t<td>{ name }</td>\n\t\t<td>{ phone }</td>\n\t\t<td><button id={ id } onClick={deletePerson}>delete</button></td>\n\t</tr>\n)\n\nconst Filter = ({ value, onChange }) => (\n\t<div>\n\t\tFind: <input\n\t\t\tvalue = { value }\n\t\t\tonChange = { onChange }\n\t\t/>\n\t</div>\n)\n\nconst Notification = ({ type, text }) => {\n\tif (text === null) {\n\t\treturn null\n\t}\n\treturn (\n\t\t<div className={type}>\n\t\t\t{text}\n\t\t</div>\n\t)\n}\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tpersons: [],\n\t\t\tnewName: \"\",\n\t\t\tnewPhone: \"\",\n\t\t\tfilter: \"\",\n\t\t\tmessage: {\n\t\t\t\ttype: null,\n\t\t\t\ttext: null\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tpersonService\n\t\t\t.getAll()\n\t\t\t.then(response => {\n\t\t\t\tthis.setState({ persons: response })\n\t\t\t})\n\t}\n\n\taddPerson = (event) => {\n\t\tevent.preventDefault()\n\t\t// if name exists, ask and update phone number\n\t\tconst personObject = this.state.persons.find(person => person.name.toLowerCase() === this.state.newName.toLowerCase())\n\t\tif (personObject) {\n\t\t\tif (window.confirm(this.state.newName + \" exists. Replace phone number?\")) {\n\t\t\t\tpersonObject[\"phone\"] = this.state.newPhone\n\t\t\t\tpersonService\n\t\t\t\t\t.update(personObject.id, personObject)\n\t\t\t\t\t.then(changedPerson => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tpersons: this.state.persons.map(person => person.id !== changedPerson.id ? person : changedPerson),\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\t\t\ttext: `Person ${changedPerson.name} phone number changed.`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\t\t\ttext: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\t\ttext: `Person ${personObject.name} is already deleted.`\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpersons: this.state.persons.filter(person => person.id !== personObject.id)\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\t\t\ttext: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t})\n\t\t}\n\t\t\t// in case of new person, create new person\n\t\t} else {\n\t\t\tconst personObject = {\n\t\t\t\tname: this.state.newName,\n\t\t\t\tphone: this.state.newPhone\n\t\t\t}\n\t\t\tpersonService\n\t\t\t\t.create(personObject)\n\t\t\t\t.then(newPerson => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tpersons: this.state.persons.concat(newPerson),\n\t\t\t\t\t\tnewName: '',\n\t\t\t\t\t\tnewPhone: ''\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\t\ttext: `New person ${personObject.name} added.`\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\t\ttext: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tdeletePerson = (id, name) => {\n\t\treturn () => {\n\t\t\tif (window.confirm(`Delete ${name} ?`)) {\n\t\t\t\tpersonService\n\t\t\t\t\t.deletePerson(id)\n\t\t\t\t\t.then(deletedPerson => {\n\t\t\t\t\t\tconst persons = this.state.persons.filter(person => person.id !== id)\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tpersons,\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\t\t\ttext: `Deleted person ${name}.`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\t\t\ttext: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\thandleNameChange = (event) => {\n\t\tthis.setState({ newName: event.target.value })\n\t}\n\n\thandlePhoneChange = (event) => {\n\t\tthis.setState({ newPhone: event.target.value })\n\t}\n\n\thandleFilterChange = (event) => {\n\t\tthis.setState({ filter: event.target.value })\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h1>Puhelinluettelo</h1>\n\t\t\t\t<Notification type={this.state.message.type} text={this.state.message.text} />\n\t\t\t\t<Filter value={this.state.filter} onChange={this.handleFilterChange} />\n\t\t\t\t<h2>Lisää uusi</h2>\n\t\t\t\t<form onSubmit={this.addPerson}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tName: <input\n\t\t\t\t\t\t\tvalue={this.state.newName}\n\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tPhone: <input\n\t\t\t\t\t\t\tvalue={this.state.newPhone}\n\t\t\t\t\t\t\tonChange={this.handlePhoneChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button type=\"submit\">Lisää</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t<h2>Numerot</h2>\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.persons\n\t\t\t\t\t\t\t\t.filter(person => person.name.toLowerCase().includes(this.state.filter.toLowerCase()))\n\t\t\t\t\t\t\t\t.map(person => <Person \n\t\t\t\t\t\t\t\t\tkey={person.name}\n\t\t\t\t\t\t\t\t\tname={person.name}\n\t\t\t\t\t\t\t\t\tphone={person.phone} \n\t\t\t\t\t\t\t\t\tid={person.id}\n\t\t\t\t\t\t\t\t\tdeletePerson={this.deletePerson(person.id, person.name)}\n\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}